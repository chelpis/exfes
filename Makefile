CC = gcc

CFLAGS = -std=c99
CFLAGS += -Wall -Wextra -Wpedantic
CFLAGS += -O3
CFLAGS += -Ilib/

OBJS = wrapper.o idx_LUT.o exfes.o common.o binomials.o autogenerated_c-tester_deg_2.o autogenerated_c-sequential_deg_2.o

all: test test1 test2

test: test.o lib/$(OBJS)
	$(CC) -o test test.o lib/$(OBJS)

test1: test1.o lib/$(OBJS)
	$(CC) -o test1 test1.o lib/$(OBJS)

test2: test2.o lib/$(OBJS)
	$(CC) -o test2 test2.o lib/$(OBJS)

test.o: sample/test.c lib/$(OBJS)
	$(CC) $(CFLAGS) -c sample/test.c -o test.o

test1.o: tests/test1.c lib/$(OBJS)
	$(CC) $(CFLAGS) -c tests/test1.c -o test1.o

test2.o: tests/test2.c lib/$(OBJS)
	$(CC) $(CFLAGS) -c tests/test2.c -o test2.o

%.o: lib/%.c
	$(CC) $(CFLAGS) -c $< -o $@

.PHONY: clean
clean:
	rm -f *.o test test1 test2
